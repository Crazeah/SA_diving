<!DOCTYPE html>
<html lang="zh-TW" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¦–é  | æ½›æ°´ç¤¾</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <style>
        body {
            background: linear-gradient(135deg, #e0f7fa 0%, #80deea 100%);
            min-height: 100vh;
        }
        .navbar-custom {
            background: linear-gradient(135deg, #2196F3, #21CBF3);
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .hero {
            background: linear-gradient(135deg, rgba(33, 150, 243, 0.95), rgba(33, 203, 243, 0.95)),
                        url('https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=1600') center/cover;
            color: white;
            padding: 120px 0;
            text-align: center;
            border-radius: 0 0 50px 50px;
            box-shadow: 0 15px 50px rgba(0,0,0,0.3);
        }
        .feature-card {
            background: white;
            border: none;
            border-radius: 20px;
            padding: 40px 30px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: all 0.3s;
            height: 100%;
        }
        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 50px rgba(33, 150, 243, 0.3);
        }
        .feature-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            display: block;
        }
        .stat-box {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        .stat-number {
            font-size: 3rem;
            font-weight: bold;
            background: linear-gradient(45deg, #2196F3, #21CBF3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .quick-action-btn {
            background: white;
            border: none;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            transition: all 0.3s;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            display: block;
            text-decoration: none;
            color: inherit;
        }
        .quick-action-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(33, 150, 243, 0.3);
            color: inherit;
        }
        .quick-action-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>

<!-- å°èˆªåˆ— -->
<nav class="navbar navbar-expand-lg navbar-dark navbar-custom mb-0">
    <div class="container-fluid">
        <a class="navbar-brand fw-bold" href="/">ğŸŒŠ æ½›æ°´ç¤¾ç³»çµ±</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link" href="/">é¦–é </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/activity/list">æ´»å‹•åˆ—è¡¨</a>
                </li>
                <!-- åƒ… Manager ä»¥ä¸Šçœ‹å¾—åˆ° -->
                <li class="nav-item" th:if="${user != null and (user.role == 'MANAGER' or user.role == 'SUPER')}">
                    <a class="nav-link" href="/activity/create">å»ºç«‹æ´»å‹•</a>
                </li>
                <!-- åƒ… SuperManager çœ‹å¾—åˆ° -->
                <li class="nav-item" th:if="${user != null and user.role == 'SUPER'}">
                    <a class="nav-link" href="/activity/audit/list">
                        å¾…å¯©æ ¸ <span class="badge bg-warning" th:text="${pendingCount}">3</span>
                    </a>
                </li>
                <!-- ä½¿ç”¨è€…è³‡è¨Š -->
                <li class="nav-item" th:if="${user != null}">
                    <span class="nav-link">
                        ğŸ‘¤ <span th:text="${user.name}">ä½¿ç”¨è€…</span>
                    </span>
                </li>
                <li class="nav-item" th:if="${user != null}">
                    <a class="nav-link" href="/logout">ç™»å‡º</a>
                </li>
                <li class="nav-item" th:if="${user == null}">
                    <a class="nav-link btn btn-outline-light btn-sm" href="/login">ç™»å…¥</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!-- Hero Section -->
<div class="hero animate__animated animate__fadeIn">
    <div class="container">
        <h1 class="display-3 fw-bold mb-4 animate__animated animate__fadeInDown">
            ğŸŒŠ æ¢ç´¢æ°´ä¸‹ä¸–ç•Œçš„ç„¡é™å¯èƒ½
        </h1>
        <p class="lead mb-5 animate__animated animate__fadeInUp animate__delay-1s">
            åŠ å…¥æ½›æ°´ç¤¾ï¼Œé«”é©—å‰æ‰€æœªæœ‰çš„æµ·æ´‹å†’éšª
        </p>
        <div class="d-flex justify-content-center gap-3 animate__animated animate__fadeInUp animate__delay-2s">
            <a href="/activity/list" class="btn btn-light btn-lg px-5 py-3 fw-bold">
                ç€è¦½æ´»å‹• â†’
            </a>
            <a href="/login" class="btn btn-outline-light btn-lg px-5 py-3 fw-bold" th:if="${user == null}">
                ç«‹å³åŠ å…¥
            </a>
        </div>

        <!-- çµ±è¨ˆè³‡è¨Š -->
        <div class="row mt-5 pt-5">
            <div class="col-md-4 mb-3">
                <div class="stat-box animate__animated animate__fadeInLeft">
                    <div class="stat-number" th:text="${totalActivities} ?: '24'">24</div>
                    <div class="fw-bold text-muted">å ´æ´»å‹•</div>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <div class="stat-box animate__animated animate__fadeInUp">
                    <div class="stat-number" th:text="${totalMembers} ?: '156'">156</div>
                    <div class="fw-bold text-muted">ä½æœƒå“¡</div>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <div class="stat-box animate__animated animate__fadeInRight">
                    <div class="stat-number" th:text="${totalDives} ?: '89'">89</div>
                    <div class="fw-bold text-muted">æ¬¡æ½›æ°´</div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container py-5">
    <!-- å¿«é€Ÿæ“ä½œå€ï¼ˆæ ¹æ“šè§’è‰²é¡¯ç¤ºï¼‰ -->
    <div class="row mb-5" th:if="${user != null}">
        <div class="col-12">
            <h3 class="fw-bold mb-4 text-center">âš¡ å¿«é€Ÿæ“ä½œ</h3>
        </div>
        
        <!-- æ‰€æœ‰äººéƒ½çœ‹å¾—åˆ° -->
        <div class="col-md-4 mb-3">
            <a href="/activity/list" class="quick-action-btn">
                <div class="quick-action-icon">ğŸ“‹</div>
                <h5 class="fw-bold mb-2">ç€è¦½æ´»å‹•</h5>
                <p class="text-muted small mb-0">æŸ¥çœ‹æ‰€æœ‰å¯å ±åæ´»å‹•</p>
            </a>
        </div>

        <!-- Manager ä»¥ä¸Šçœ‹å¾—åˆ° -->
        <div class="col-md-4 mb-3" th:if="${user.role == 'MANAGER' or user.role == 'SUPER'}">
            <a href="/activity/create" class="quick-action-btn">
                <div class="quick-action-icon">â•</div>
                <h5 class="fw-bold mb-2">å»ºç«‹æ´»å‹•</h5>
                <p class="text-muted small mb-0">ç™¼èµ·æ–°çš„æ½›æ°´æ´»å‹•</p>
            </a>
        </div>

        <!-- SuperManager çœ‹å¾—åˆ° -->
        <div class="col-md-4 mb-3" th:if="${user.role == 'SUPER'}">
            <a href="/activity/audit/list" class="quick-action-btn">
                <div class="quick-action-icon">âœ…</div>
                <h5 class="fw-bold mb-2">å¯©æ ¸æ´»å‹•</h5>
                <p class="text-muted small mb-0">
                    <span class="badge bg-warning" th:text="${pendingCount}">3</span> ç­†å¾…è™•ç†
                </p>
            </a>
        </div>
    </div>

    <!-- åŠŸèƒ½ç‰¹è‰² -->
    <div class="row mb-5">
        <div class="col-12 text-center mb-5">
            <h2 class="fw-bold">ğŸ¯ ç³»çµ±åŠŸèƒ½ç‰¹è‰²</h2>
            <p class="text-muted">å®Œå–„çš„æ½›æ°´ç¤¾åœ˜ç®¡ç†å¹³å°</p>
        </div>

        <div class="col-md-4 mb-4">
            <div class="feature-card animate__animated animate__fadeInLeft">
                <span class="feature-icon">ğŸŠ</span>
                <h4 class="fw-bold mb-3">æ´»å‹•ç®¡ç†</h4>
                <p class="text-muted">
                    è¼•é¬†å»ºç«‹ã€ç·¨è¼¯å’Œç®¡ç†å„é¡æ½›æ°´æ´»å‹•ï¼ŒåŒ…å« Fun Diveã€èª²ç¨‹æ•™å­¸ã€ç¤¾åœ˜èšæœƒç­‰
                </p>
            </div>
        </div>

        <div class="col-md-4 mb-4">
            <div class="feature-card animate__animated animate__fadeInUp">
                <span class="feature-icon">âœ…</span>
                <h4 class="fw-bold mb-3">å¯©æ ¸æ©Ÿåˆ¶</h4>
                <p class="text-muted">
                    å®Œå–„çš„æ´»å‹•å¯©æ ¸æµç¨‹ï¼Œç¢ºä¿æ‰€æœ‰æ´»å‹•ç¬¦åˆå®‰å…¨æ¨™æº–å’Œç¤¾åœ˜è¦ç¯„
                </p>
            </div>
        </div>

        <div class="col-md-4 mb-4">
            <div class="feature-card animate__animated animate__fadeInRight">
                <span class="feature-icon">ğŸ“Š</span>
                <h4 class="fw-bold mb-3">æ•¸æ“šçµ±è¨ˆ</h4>
                <p class="text-muted">
                    å³æ™‚æŒæ¡æ´»å‹•åƒèˆ‡ç‹€æ³ã€æœƒå“¡æ•¸æ“šï¼Œå¹«åŠ©æ›´å¥½åœ°è¦åŠƒæœªä¾†æ´»å‹•
                </p>
            </div>
        </div>
    </div>

    <!-- æœ€æ–°æ´»å‹•é è¦½ -->
    <div class="row">
        <div class="col-12 text-center mb-5">
            <h2 class="fw-bold">ğŸŒŸ æœ€æ–°æ´»å‹•</h2>
            <p class="text-muted">æ¢ç´¢å³å°‡é–‹å§‹çš„ç²¾å½©æ´»å‹•</p>
        </div>

        <!-- æ´»å‹•é è¦½å¡ç‰‡ï¼ˆé¡¯ç¤ºæœ€æ–° 3 ç­†ï¼‰ -->
        <div class="col-md-4 mb-4" th:each="activity, iterStat : ${recentActivities}" th:if="${iterStat.index < 3}">
            <div class="card border-0 shadow-sm" style="border-radius: 20px; overflow: hidden; transition: transform 0.3s;">
                <img th:src="${activity.imageUrl} ?: 'https://via.placeholder.com/400x200/2196F3/FFFFFF?text=Diving'" 
                     class="card-img-top" 
                     style="height: 200px; object-fit: cover;"
                     alt="æ´»å‹•åœ–ç‰‡">
                <div class="card-body">
                    <h5 class="card-title fw-bold" th:text="${activity.title}">å°ç‰çƒæ½›æ—…</h5>
                    <p class="text-muted small">
                        ğŸ“… <span th:text="${#temporals.format(activity.startTime, 'MM/dd')}">01/03</span> | 
                        ğŸ“ <span th:text="${activity.location}">å°ç‰çƒ</span>
                    </p>
                    <a th:href="@{/activity/{id}(id=${activity.id})}" class="btn btn-outline-primary w-100">
                        æŸ¥çœ‹è©³æƒ…
                    </a>
                </div>
            </div>
        </div>

        <!-- å¦‚æœæ²’æœ‰æ´»å‹• -->
        <div class="col-12 text-center py-5" th:if="${#lists.isEmpty(recentActivities)}">
            <p class="text-muted">ç›®å‰æ²’æœ‰æœ€æ–°æ´»å‹•ï¼Œæ•¬è«‹æœŸå¾…ï¼</p>
        </div>

        <!-- æŸ¥çœ‹æ›´å¤š -->
        <div class="col-12 text-center mt-4">
            <a href="/activity/list" class="btn btn-primary btn-lg px-5">
                æŸ¥çœ‹æ‰€æœ‰æ´»å‹• â†’
            </a>
        </div>
    </div>
</div>

<!-- Footer -->
<footer class="bg-white mt-5 py-4 shadow-sm">
    <div class="container text-center">
        <p class="text-muted mb-2">
            ğŸŒŠ åœ‹ç«‹ä¸­å¤®å¤§å­¸æ½›æ°´ç¤¾ | NCU Diving Club
        </p>
        <p class="text-muted small mb-0">
            Â© 2025 All Rights Reserved | å‰ç¤¾é•·çœŸçš„å¥½æ¼‚äº®ç˜‹æ‰
        </p>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // å¡ç‰‡ Hover æ•ˆæœ
    document.querySelectorAll('.card').forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-10px)';
        });
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
        });
    });
</script>
</body>
</html>